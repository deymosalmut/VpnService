----------------------------------------------------------------
>>> Stage 3.4 — Migrations CHECK
----------------------------------------------------------------
CSPROJ=
----------------------------------------------------------------
>>> dotnet ef --version
----------------------------------------------------------------
CMD: bash -lc cd '/opt/vpn-service' && dotnet ef --version
Entity Framework Core .NET Command-line Tools
9.0.11
STATUS: 0
----------------------------------------------------------------
>>> DB app connect: select 1
----------------------------------------------------------------
CMD: bash -lc PGPASSWORD='vpnservice_pwd_20260106_114545' psql -h '127.0.0.1' -p '5432' -U 'vpnservice' -d 'vpnservice' -v ON_ERROR_STOP=1 -Atc 'select 1;'
1
STATUS: 0
----------------------------------------------------------------
>>> EF migrations list (source)
----------------------------------------------------------------
CMD: bash -lc cd '/opt/vpn-service' && dotnet ef migrations list --project '' --no-build
System.ArgumentException: The value cannot be an empty string. (Parameter 'path')
   at System.ArgumentException.ThrowNullOrEmptyException(String argument, String paramName)
   at System.IO.Path.GetFullPath(String path)
   at Microsoft.EntityFrameworkCore.Tools.RootCommand.ResolveProjects(String path)
   at Microsoft.EntityFrameworkCore.Tools.RootCommand.ResolveProjects(String projectPath, String startupProjectPath)
   at Microsoft.EntityFrameworkCore.Tools.RootCommand.Execute(String[] _)
   at Microsoft.EntityFrameworkCore.Tools.Commands.CommandBase.<>c__DisplayClass0_0.<Configure>b__0(String[] args)
   at Microsoft.DotNet.Cli.CommandLine.CommandLineApplication.Execute(String[] args)
   at Microsoft.EntityFrameworkCore.Tools.Program.Main(String[] args)
The value cannot be an empty string. (Parameter 'path')
STATUS: 1
----------------------------------------------------------------
>>> DB applied migrations (__EFMigrationsHistory)
----------------------------------------------------------------
CMD: psql query __EFMigrationsHistory (best-effort)
ERROR:  relation "__EFMigrationsHistory" does not exist
СТРОКА 1: select migrationid from "__EFMigrationsHistory" order by mig...
                                  ^
STATUS: 1
INFO __EFMigrationsHistory not readable yet (ok on fresh DB). Treating as empty.
----------------------------------------------------------------
>>> Compute pending migrations + (optional) generate idempotent SQL
----------------------------------------------------------------
SOURCE_COUNT=0
APPLIED_COUNT=0
PENDING_COUNT=0
RESULT: NO_PENDING_MIGRATIONS
----------------------------------------------------------------
>>> Stage 3.4 — Migrations CHECK — DONE
----------------------------------------------------------------
Done. Report saved: /opt/vpn-service/reports/report_stage34_migrations_check_2026-01-06_12-40-45.log
