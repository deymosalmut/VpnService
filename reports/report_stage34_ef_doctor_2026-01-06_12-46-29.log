----------------------------------------------------------------
>>> EF Doctor — environment
----------------------------------------------------------------
----------------------------------------------------------------
>>> dotnet ef --version
----------------------------------------------------------------
+ CMD: bash -lc cd '/opt/vpn-service' && dotnet ef --version
Entity Framework Core .NET Command-line Tools
9.0.11
STATUS: OK (exit=0)
----------------------------------------------------------------
>>> Load app DB env (normalize)
----------------------------------------------------------------
+ CMD: bash -lc 
    cd '/opt/vpn-service'
    source scripts/lib/appdb.sh
    load_app_db_env '/opt/vpn-service/infra/local/app-db.env'
    echo "PG_HOST=$PG_HOST PG_PORT=$PG_PORT PG_DATABASE=$PG_DATABASE PG_USER=$PG_USER PG_PASSWORD=${PG_PASSWORD:+SET}"
  
PG_HOST=127.0.0.1 PG_PORT=5432 PG_DATABASE=vpnservice PG_USER=vpnservice PG_PASSWORD=SET
STATUS: OK (exit=0)
----------------------------------------------------------------
>>> EF Doctor — list candidate projects
----------------------------------------------------------------
CANDIDATE: ./VpnService.Api/VpnService.Api.csproj
CANDIDATE: ./VpnService.Infrastructure/VpnService.Infrastructure.csproj
CANDIDATE: ./VpnService.Infrastructure.Abstractions/VpnService.Infrastructure.Abstractions.csproj
CANDIDATE: ./VpnService.Application/VpnService.Application.csproj
----------------------------------------------------------------
>>> EF Doctor — try migrations list per candidate (FULL OUTPUT)
----------------------------------------------------------------
----------------------------------------------------------------
>>> TRY: dotnet ef migrations list --project './VpnService.Api/VpnService.Api.csproj' --startup-project './VpnService.Api/VpnService.Api.csproj'
----------------------------------------------------------------
Your startup project 'VpnService.Api' doesn't reference Microsoft.EntityFrameworkCore.Design. This package is required for the Entity Framework Core Tools to work. Ensure your startup project is correct, install the package, and try again.
EXIT_CODE: 1
----------------------------------------------------------------
>>> TRY: dotnet ef migrations list --project './VpnService.Infrastructure/VpnService.Infrastructure.csproj' --startup-project './VpnService.Infrastructure/VpnService.Infrastructure.csproj'
----------------------------------------------------------------
Unable to create a 'DbContext' of type 'RuntimeType'. The exception 'Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContextOptions`1[VpnService.Infrastructure.Persistence.VpnDbContext]' while attempting to activate 'VpnService.Infrastructure.Persistence.VpnDbContext'.' was thrown while attempting to create an instance. For the different patterns supported at design time, see https://go.microsoft.com/fwlink/?linkid=851728
EXIT_CODE: 1
----------------------------------------------------------------
>>> TRY: dotnet ef migrations list --project './VpnService.Infrastructure.Abstractions/VpnService.Infrastructure.Abstractions.csproj' --startup-project './VpnService.Infrastructure.Abstractions/VpnService.Infrastructure.Abstractions.csproj'
----------------------------------------------------------------
Your startup project 'VpnService.Infrastructure.Abstractions' doesn't reference Microsoft.EntityFrameworkCore.Design. This package is required for the Entity Framework Core Tools to work. Ensure your startup project is correct, install the package, and try again.
EXIT_CODE: 1
----------------------------------------------------------------
>>> TRY: dotnet ef migrations list --project './VpnService.Application/VpnService.Application.csproj' --startup-project './VpnService.Application/VpnService.Application.csproj'
----------------------------------------------------------------
Your startup project 'VpnService.Application' doesn't reference Microsoft.EntityFrameworkCore.Design. This package is required for the Entity Framework Core Tools to work. Ensure your startup project is correct, install the package, and try again.
EXIT_CODE: 1
FAIL: EF migrations list failed for all candidates.
