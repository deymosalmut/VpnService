Используются параметры запуска из VpnService.Api/Properties/launchSettings.json...
Сборка…
/opt/vpn-service/VpnService.Infrastructure/Repositories/RefreshTokenRepository.cs(35,23): warning CS1998: В данном асинхронном методе отсутствуют операторы await, поэтому метод будет выполняться синхронно. Воспользуйтесь оператором await для ожидания неблокирующих вызовов API или оператором await Task.Run(...) для выполнения связанных с ЦП заданий в фоновом потоке. [/opt/vpn-service/VpnService.Infrastructure/VpnService.Infrastructure.csproj]
/opt/vpn-service/VpnService.Infrastructure/Repositories/PeerRepository.cs(57,23): warning CS1998: В данном асинхронном методе отсутствуют операторы await, поэтому метод будет выполняться синхронно. Воспользуйтесь оператором await для ожидания неблокирующих вызовов API или оператором await Task.Run(...) для выполнения связанных с ЦП заданий в фоновом потоке. [/opt/vpn-service/VpnService.Infrastructure/VpnService.Infrastructure.csproj]
[11:03:04 INF] Saved 0 entities to in-memory store.
[11:03:04 INF] In-memory database created successfully
[11:03:04 INF] VPN Service starting...
[11:03:04 INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[11:03:04 INF] Now listening on: http://localhost:5272
[11:03:04 INF] Application started. Press Ctrl+C to shut down.
[11:03:04 INF] Hosting environment: Development
[11:03:04 INF] Content root path: /opt/vpn-service/VpnService.Api
[11:03:04 INF] Request starting HTTP/1.1 GET http://localhost:5272/health - null null
[11:03:04 WRN] Failed to determine the https port for redirect.
[11:03:04 INF] Executing endpoint 'Health checks'
[11:03:04 INF] Executed endpoint 'Health checks'
[11:03:04 INF] Request finished HTTP/1.1 GET http://localhost:5272/health - 200 null text/plain 73.9923ms
[11:03:25 INF] Request starting HTTP/1.1 GET http://localhost:5272/health - null null
[11:03:25 INF] Executing endpoint 'Health checks'
[11:03:25 INF] Executed endpoint 'Health checks'
[11:03:25 INF] Request finished HTTP/1.1 GET http://localhost:5272/health - 200 null text/plain 5.1283ms
[11:03:25 INF] Request starting HTTP/1.1 POST http://localhost:5272/api/v1/auth/login - application/json 42
[11:03:25 INF] Executing endpoint 'VpnService.Api.Controllers.AuthController.Login (VpnService.Api)'
[11:03:26 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VpnService.Application.DTOs.AuthLoginResponse]] Login(VpnService.Application.DTOs.AuthLoginRequest) on controller VpnService.Api.Controllers.AuthController (VpnService.Api).
[11:03:26 INF] Saved 1 entities to in-memory store.
[11:03:26 INF] User logged in: admin
[11:03:26 INF] Executing OkObjectResult, writing value of type 'VpnService.Application.DTOs.AuthLoginResponse'.
[11:03:26 INF] Executed action VpnService.Api.Controllers.AuthController.Login (VpnService.Api) in 189.3121ms
[11:03:26 INF] Executed endpoint 'VpnService.Api.Controllers.AuthController.Login (VpnService.Api)'
[11:03:26 INF] Request finished HTTP/1.1 POST http://localhost:5272/api/v1/auth/login - 200 null application/json; charset=utf-8 218.2606ms
[11:03:50 INF] Request starting HTTP/1.1 GET http://localhost:5272/health - null null
[11:03:50 INF] Executing endpoint 'Health checks'
[11:03:50 INF] Executed endpoint 'Health checks'
[11:03:50 INF] Request finished HTTP/1.1 GET http://localhost:5272/health - 200 null text/plain 1.6879ms
[11:03:50 INF] Request starting HTTP/1.1 POST http://localhost:5272/api/v1/auth/login - application/json 42
[11:03:50 INF] Executing endpoint 'VpnService.Api.Controllers.AuthController.Login (VpnService.Api)'
[11:03:50 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VpnService.Application.DTOs.AuthLoginResponse]] Login(VpnService.Application.DTOs.AuthLoginRequest) on controller VpnService.Api.Controllers.AuthController (VpnService.Api).
[11:03:50 INF] Saved 1 entities to in-memory store.
[11:03:50 INF] User logged in: admin
[11:03:50 INF] Executing OkObjectResult, writing value of type 'VpnService.Application.DTOs.AuthLoginResponse'.
[11:03:50 INF] Executed action VpnService.Api.Controllers.AuthController.Login (VpnService.Api) in 32.0009ms
[11:03:50 INF] Executed endpoint 'VpnService.Api.Controllers.AuthController.Login (VpnService.Api)'
[11:03:50 INF] Request finished HTTP/1.1 POST http://localhost:5272/api/v1/auth/login - 200 null application/json; charset=utf-8 35.0468ms
[11:30:30 INF] Request starting HTTP/1.1 GET http://localhost:5272/health - null null
[11:30:30 INF] Executing endpoint 'Health checks'
[11:30:30 INF] Executed endpoint 'Health checks'
[11:30:30 INF] Request finished HTTP/1.1 GET http://localhost:5272/health - 200 null text/plain 1.8929ms
[11:30:30 INF] Request starting HTTP/1.1 POST http://localhost:5272/api/v1/auth/login - application/json 42
[11:30:30 INF] Executing endpoint 'VpnService.Api.Controllers.AuthController.Login (VpnService.Api)'
[11:30:30 INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VpnService.Application.DTOs.AuthLoginResponse]] Login(VpnService.Application.DTOs.AuthLoginRequest) on controller VpnService.Api.Controllers.AuthController (VpnService.Api).
[11:30:30 INF] Saved 1 entities to in-memory store.
[11:30:30 INF] User logged in: admin
[11:30:30 INF] Executing OkObjectResult, writing value of type 'VpnService.Application.DTOs.AuthLoginResponse'.
[11:30:30 INF] Executed action VpnService.Api.Controllers.AuthController.Login (VpnService.Api) in 5.481ms
[11:30:30 INF] Executed endpoint 'VpnService.Api.Controllers.AuthController.Login (VpnService.Api)'
[11:30:30 INF] Request finished HTTP/1.1 POST http://localhost:5272/api/v1/auth/login - 200 null application/json; charset=utf-8 7.0759ms
[11:32:33 INF] Request starting HTTP/1.1 GET http://localhost:5272/api/v1/admin/wg/reconcile?iface=wg1&mode=dry-run - null null
[11:32:33 INF] Request finished HTTP/1.1 GET http://localhost:5272/api/v1/admin/wg/reconcile?iface=wg1&mode=dry-run - 404 0 null 52.1873ms
[11:32:33 INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5272/api/v1/admin/wg/reconcile, Response status code: 404
[11:45:20 INF] Request starting HTTP/1.1 GET http://localhost:5272/api/v1/admin/wg/reconcile?iface=wg1&mode=dry-run - null null
[11:45:20 INF] Request finished HTTP/1.1 GET http://localhost:5272/api/v1/admin/wg/reconcile?iface=wg1&mode=dry-run - 404 0 null 3.2673ms
[11:45:20 INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5272/api/v1/admin/wg/reconcile, Response status code: 404
[11:46:42 INF] Application is shutting down...
